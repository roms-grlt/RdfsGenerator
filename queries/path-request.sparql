# Requête avec expressions de chemin : démontre le raisonnement RDFS via subClassOf*
# Navigue dans la hiérarchie des classes (film -> AmazonFilm/NetflixFilm/ImdbFilm)
# Utilise également subPropertyOf+ pour les propriétés héritées
PREFIX unified: <http://example.org/unified/>
PREFIX amazon: <http://example.org/amazon/>
PREFIX netflix: <http://example.org/netflix/>
PREFIX imdb: <http://example.org/imdb/>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

SELECT ?film ?title ?specificType ?rating ?genre
WHERE {
  # Utilise le chemin RDFS pour trouver tous les films via la hiérarchie de classes
  ?film rdf:type/rdfs:subClassOf* unified:film ;
        unified:title ?title ;
        rdf:type ?specificType .

  # Propriétés enrichies par le raisonnement
  OPTIONAL { ?film unified:rating ?rating }
  OPTIONAL { ?film unified:genre ?genre }

  # Filtrer pour ne garder que les types spécifiques (pas la classe générique)
  FILTER(?specificType != unified:film)
  FILTER(?rating > 7.0)
}
ORDER BY DESC(?rating) ?specificType
LIMIT 25